(function(n,t){"use strict";var f=t.module("ngDialog",[]),i=t.element,r=t.isDefined,u=(document.body||document.documentElement).style,o=r(u.animation)||r(u.WebkitAnimation)||r(u.MozAnimation)||r(u.MsAnimation)||r(u.OAnimation),e="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend";f.provider("ngDialog",function(){var h=this.defaults={className:"ngdialog-theme-default",plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0},u=0,r=0,f,s={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window",function(c,l,a,v,y,p,w,b){var k=c.find("body"),d={onDocumentKeydown:function(n){n.keyCode===27&&g.close()},setBodyPadding:function(n){var t=parseInt(k.css("padding-right")||0,10);k.css("padding-right",t+n+"px");k.data("ng-dialog-original-padding",t)},resetBodyPadding:function(){var n=k.data("ng-dialog-original-padding");n?k.css("padding-right",n+"px"):k.css("padding-right","")},closeDialog:function(t){var i=t.attr("id");typeof n.Hammer!="undefined"?n.Hammer(t[0]).off("tap",f):t.unbind("click");r===1&&k.unbind("keydown");t.hasClass("ngdialog-closing")||(r-=1);o?t.unbind(e).bind(e,function(){t.scope().$destroy();t.remove();r===0&&(k.removeClass("ngdialog-open"),d.resetBodyPadding());p.$broadcast("ngDialog.closed",t)}).addClass("ngdialog-closing"):(t.scope().$destroy(),t.remove(),r===0&&(k.removeClass("ngdialog-open"),d.resetBodyPadding()),p.$broadcast("ngDialog.closed",t));s[i]&&(s[i].resolve({id:i,$dialog:t,remainingDialogs:r}),delete s[i])}},g={open:function(e){function rt(n){return n?t.isString(n)&&o.plain?n:l.get(n)||y.get(n,{cache:!0}):"Empty template"}var tt=this,o=t.copy(h),it,nt,c;return e=e||{},t.extend(o,e),u+=1,tt.latestID="ngdialog"+u,s[tt.latestID]=it=v.defer(),nt=t.isObject(o.scope)?o.scope.$new():p.$new(),v.when(rt(o.template)).then(function(e){if(e=t.isString(e)?e:e.data&&t.isString(e.data)?e.data:"",l.put(o.template,e),o.showClose&&(e+='<div class="ngdialog-close"><\/div>'),tt.$result=c=i('<div id="ngdialog'+u+'" class="ngdialog"><\/div>'),c.html('<div class="ngdialog-overlay"><\/div><div class="ngdialog-content">'+e+"<\/div>"),o.controller&&t.isString(o.controller)&&c.attr("ng-controller",o.controller),o.className&&c.addClass(o.className),o.data&&t.isString(o.data)&&(nt.ngDialogData=o.data.replace(/^\s*/,"")[0]==="{"?t.fromJson(o.data):o.data),nt.closeThisDialog=function(){d.closeDialog(c)},w(function(){var t,n;a(c)(nt);t=b.innerWidth-k.prop("clientWidth");k.addClass("ngdialog-open");n=t-(b.innerWidth-k.prop("clientWidth"));n>0&&d.setBodyPadding(n);k.append(c);p.$broadcast("ngDialog.opened",c)}),o.closeByEscape&&k.bind("keydown",d.onDocumentKeydown),f=function(n){var t=o.closeByDocument?i(n.target).hasClass("ngdialog-overlay"):!1,r=i(n.target).hasClass("ngdialog-close");(t||r)&&g.close(c.attr("id"))},typeof n.Hammer!="undefined")n.Hammer(c[0]).on("tap",f);else c.bind("click",f);return r+=1,g}),{id:"ngdialog"+u,closePromise:it.promise,close:function(){d.closeDialog(c)}}},openConfirm:function(n){var r=v.defer(),i={closeByEscape:!1,closeByDocument:!1},u;return t.extend(i,n),i.scope=t.isObject(i.scope)?i.scope.$new():p.$new(),i.scope.confirm=function(n){r.resolve(n);u.close()},u=g.open(i),u.closePromise.then(function(){r.reject()}),r.promise},close:function(n){var t=i(document.getElementById(n));return t.length?d.closeDialog(t):g.closeAll(),g},closeAll:function(){var n=document.querySelectorAll(".ngdialog");t.forEach(n,function(n){d.closeDialog(i(n))})}};return g}]});f.directive("ngDialog",["ngDialog",function(n){return{restrict:"A",scope:{ngDialogScope:"="},link:function(i,r,u){r.on("click",function(r){r.preventDefault();var f=t.isDefined(i.ngDialogScope)?i.ngDialogScope:"noScope";t.isDefined(u.ngDialogClosePrevious)&&n.close(u.ngDialogClosePrevious);n.open({template:u.ngDialog,className:u.ngDialogClass,controller:u.ngDialogController,scope:f,data:u.ngDialogData,showClose:u.ngDialogShowClose==="false"?!1:!0,closeByDocument:u.ngDialogCloseByDocument==="false"?!1:!0,closeByEscape:u.ngDialogCloseByEscape==="false"?!1:!0})})}}}])})(window,window.angular);
/*
//# sourceMappingURL=ngDialog.min.js.map
*/
