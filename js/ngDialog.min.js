(function(e,t,n){"use strict";var r=t.module("ngDialog",[]);var i=t.element;var s=t.isDefined;var o=(document.body||document.documentElement).style;var u=s(o.animation)||s(o.WebkitAnimation)||s(o.MozAnimation)||s(o.MsAnimation)||s(o.OAnimation);var a="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend";var f=false;r.provider("ngDialog",function(){var n=this.defaults={className:"ngdialog-theme-default",plain:false,showClose:true,closeByDocument:true,closeByEscape:true,appendTo:false};this.setForceBodyReload=function(e){f=e||false};var r=0,s=0,o,l={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window",function(f,c,h,p,d,v,m,g){var y=f.find("body");if(n.forceBodyReload){v.$on("$locationChangeSuccess",function(){y=f.find("body")})}var b={onDocumentKeydown:function(e){if(e.keyCode===27){w.close()}},setBodyPadding:function(e){var t=parseInt(y.css("padding-right")||0,10);y.css("padding-right",t+e+"px");y.data("ng-dialog-original-padding",t)},resetBodyPadding:function(){var e=y.data("ng-dialog-original-padding");if(e){y.css("padding-right",e+"px")}else{y.css("padding-right","")}},closeDialog:function(t){var n=t.attr("id");if(typeof e.Hammer!=="undefined"){e.Hammer(t[0]).off("tap",o)}else{t.unbind("click")}if(s===1){y.unbind("keydown")}if(!t.hasClass("ngdialog-closing")){s-=1}if(u){t.unbind(a).bind(a,function(){t.scope().$destroy();t.remove();if(s===0){y.removeClass("ngdialog-open");b.resetBodyPadding()}v.$broadcast("ngDialog.closed",t)}).addClass("ngdialog-closing")}else{t.scope().$destroy();t.remove();if(s===0){y.removeClass("ngdialog-open");b.resetBodyPadding()}v.$broadcast("ngDialog.closed",t)}if(l[n]){l[n].resolve({id:n,$dialog:t,remainingDialogs:s});delete l[n]}}};var w={open:function(u){function N(e){if(!e){return"Empty template"}if(t.isString(e)&&f.plain){return e}return c.get(e)||d.get(e,{cache:true})}var a=this;var f=t.copy(n);u=u||{};t.extend(f,u);r+=1;a.latestID="ngdialog"+r;var E;l[a.latestID]=E=p.defer();var S=t.isObject(f.scope)?f.scope.$new():v.$new();var x,T;p.when(N(f.template)).then(function(n){n=t.isString(n)?n:n.data&&t.isString(n.data)?n.data:"";c.put(f.template,n);if(f.showClose){n+='<div class="ngdialog-close"></div>'}a.$result=x=i('<div id="ngdialog'+r+'" class="ngdialog-wrapper"></div>');x.html('<div class="ngdialog-overlay"></div><div class="ngdialog"><div class="ngdialog-content">'+n+"</div></div>");if(f.controller&&t.isString(f.controller)){x.attr("ng-controller",f.controller)}if(f.className){x.addClass(f.className)}if(f.data&&t.isString(f.data)){S.ngDialogData=f.data.replace(/^\s*/,"")[0]==="{"?t.fromJson(f.data):f.data}if(f.appendTo&&t.isString(f.appendTo)){T=t.element(document.querySelector(f.appendTo))}else{T=y}S.closeThisDialog=function(){b.closeDialog(x)};m(function(){h(x)(S);var e=g.innerWidth-y.prop("clientWidth");y.addClass("ngdialog-open");var t=e-(g.innerWidth-y.prop("clientWidth"));if(t>0){b.setBodyPadding(t)}T.append(x);v.$broadcast("ngDialog.opened",x)});if(f.closeByEscape){y.bind("keydown",b.onDocumentKeydown)}o=function(e){var t=f.closeByDocument?i(e.target).hasClass("ngdialog"):false;var n=i(e.target).hasClass("ngdialog-close");if(t||n){w.close(x.attr("id"))}};if(typeof e.Hammer!=="undefined"){e.Hammer(x[0]).on("tap",o)}else{x.bind("click",o)}s+=1;return w});return{id:"ngdialog"+r,closePromise:E.promise,close:function(){b.closeDialog(x)}}},openConfirm:function(e){var n=p.defer();var r={closeByEscape:false,closeByDocument:false};t.extend(r,e);r.scope=t.isObject(r.scope)?r.scope.$new():v.$new();r.scope.confirm=function(e){n.resolve(e);i.close()};var i=w.open(r);i.closePromise.then(function(){n.reject()});return n.promise},close:function(e){var t=i(document.getElementById(e));if(t.length){b.closeDialog(t)}else{w.closeAll()}return w},closeAll:function(){var e=document.querySelectorAll(".ngdialog-wrapper");t.forEach(e,function(e){b.closeDialog(i(e))})}};return w}]});r.directive("ngDialog",["ngDialog",function(e){return{restrict:"A",scope:{ngDialogScope:"="},link:function(n,r,i){r.on("click",function(r){r.preventDefault();var s=t.isDefined(n.ngDialogScope)?n.ngDialogScope:"noScope";t.isDefined(i.ngDialogClosePrevious)&&e.close(i.ngDialogClosePrevious);e.open({template:i.ngDialog,className:i.ngDialogClass,controller:i.ngDialogController,scope:s,data:i.ngDialogData,showClose:i.ngDialogShowClose==="false"?false:true,closeByDocument:i.ngDialogCloseByDocument==="false"?false:true,closeByEscape:i.ngDialogCloseByEscape==="false"?false:true})})}}}])})(window,window.angular)