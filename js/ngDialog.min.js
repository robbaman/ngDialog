(function(n,t){"use strict";var f=t.module("ngDialog",[]),i=t.element,r=t.isDefined,u=(document.body||document.documentElement).style,o=r(u.animation)||r(u.WebkitAnimation)||r(u.MozAnimation)||r(u.MsAnimation)||r(u.OAnimation),e="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",s=!1;f.provider("ngDialog",function(){var c=this.defaults={className:"ngdialog-theme-default",plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,appendTo:!1};this.setForceBodyReload=function(n){s=n||!1};var u=0,r=0,f,h={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller",function(s,l,a,v,y,p,w,b,k){var d=s.find("body"),g,nt;return c.forceBodyReload&&p.$on("$locationChangeSuccess",function(){d=s.find("body")}),g={onDocumentKeydown:function(n){n.keyCode===27&&nt.close("$escape")},setBodyPadding:function(n){var t=parseInt(d.css("padding-right")||0,10);d.css("padding-right",t+n+"px");d.data("ng-dialog-original-padding",t)},resetBodyPadding:function(){var n=d.data("ng-dialog-original-padding");n?d.css("padding-right",n+"px"):d.css("padding-right","")},closeDialog:function(t,i){var u=t.attr("id");typeof n.Hammer!="undefined"?n.Hammer(t[0]).off("tap",f):t.unbind("click");r===1&&d.unbind("keydown");t.hasClass("ngdialog-closing")||(r-=1);o?t.unbind(e).bind(e,function(){t.scope().$destroy();t.remove();r===0&&(d.removeClass("ngdialog-open"),g.resetBodyPadding());p.$broadcast("ngDialog.closed",t)}).addClass("ngdialog-closing"):(t.scope().$destroy(),t.remove(),r===0&&(d.removeClass("ngdialog-open"),g.resetBodyPadding()),p.$broadcast("ngDialog.closed",t));h[u]&&(h[u].resolve({id:u,value:i,$dialog:t,remainingDialogs:r}),delete h[u])}},nt={open:function(e){function ft(n){return n?t.isString(n)&&o.plain?n:l.get(n)||y.get(n,{cache:!0}):"Empty template"}var it=this,o=t.copy(c),ut,tt,s,rt;return e=e||{},t.extend(o,e),u+=1,it.latestID="ngdialog"+u,h[it.latestID]=ut=v.defer(),tt=t.isObject(o.scope)?o.scope.$new():p.$new(),v.when(ft(o.template)).then(function(e){if(e=t.isString(e)?e:e.data&&t.isString(e.data)?e.data:"",l.put(o.template,e),o.showClose&&(e+='<div class="ngdialog-close"><\/div>'),it.$result=s=i('<div id="ngdialog'+u+'" class="ngdialog-wrapper"><\/div>'),s.html('<div class="ngdialog-overlay"><\/div><div class="ngdialog"><div class="ngdialog-content">'+e+"<\/div><\/div>"),o.controller&&(t.isString(o.controller)||t.isArray(o.controller)||t.isFunction(o.controller))){var h={$scope:tt,$element:s},c=k(o.controller,h);s.data("$ngDialogControllerController",c)}if(o.className&&s.addClass(o.className),o.data&&t.isString(o.data)&&(tt.ngDialogData=o.data.replace(/^\s*/,"")[0]==="{"?t.fromJson(o.data):o.data),rt=o.appendTo&&t.isString(o.appendTo)?t.element(document.querySelector(o.appendTo)):d,tt.closeThisDialog=function(n){g.closeDialog(s,n)},w(function(){var t,n;a(s)(tt);t=b.innerWidth-d.prop("clientWidth");d.addClass("ngdialog-open");n=t-(b.innerWidth-d.prop("clientWidth"));n>0&&g.setBodyPadding(n);rt.append(s);p.$broadcast("ngDialog.opened",s)}),o.closeByEscape&&d.bind("keydown",g.onDocumentKeydown),f=function(n){var t=o.closeByDocument?i(n.target).hasClass("ngdialog"):!1,r=i(n.target).hasClass("ngdialog-close");(t||r)&&nt.close(s.attr("id"),"$document")},typeof n.Hammer!="undefined")n.Hammer(s[0]).on("tap",f);else s.bind("click",f);return r+=1,nt}),{id:"ngdialog"+u,closePromise:ut.promise,close:function(n){g.closeDialog(s,n)}}},openConfirm:function(n){var r=v.defer(),i={closeByEscape:!1,closeByDocument:!1},u;return t.extend(i,n),i.scope=t.isObject(i.scope)?i.scope.$new():p.$new(),i.scope.confirm=function(n){r.resolve(n);u.close(n)},u=nt.open(i),u.closePromise.then(function(n){n?r.reject(n.value):r.reject()}),r.promise},close:function(n,t){var r=i(document.getElementById(n));return r.length?g.closeDialog(r,t):nt.closeAll(t),nt},closeAll:function(n){var r=document.querySelectorAll(".ngdialog-wrapper");t.forEach(r,function(t){g.closeDialog(i(t),n)})}},nt}]});f.directive("ngDialog",["ngDialog",function(n){return{restrict:"A",scope:{ngDialogScope:"="},link:function(i,r,u){r.on("click",function(r){r.preventDefault();var f=t.isDefined(i.ngDialogScope)?i.ngDialogScope:"noScope";t.isDefined(u.ngDialogClosePrevious)&&n.close(u.ngDialogClosePrevious);n.open({template:u.ngDialog,className:u.ngDialogClass,controller:u.ngDialogController,scope:f,data:u.ngDialogData,showClose:u.ngDialogShowClose==="false"?!1:!0,closeByDocument:u.ngDialogCloseByDocument==="false"?!1:!0,closeByEscape:u.ngDialogCloseByEscape==="false"?!1:!0})})}}}])})(window,window.angular);
/*
//# sourceMappingURL=ngDialog.min.js.map
*/